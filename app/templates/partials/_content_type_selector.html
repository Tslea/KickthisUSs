{# Partial template per selettore tipo contenuto #}
{# Usage: {% include 'partials/_content_type_selector.html' %} #}

<div class="bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6">
    <h3 class="text-lg font-semibold text-purple-800 mb-4 flex items-center">
        <span class="material-icons mr-2">category</span>
        Seleziona il tipo di contenuto
    </h3>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {# Software #}
        <label class="content-type-option cursor-pointer" data-type="software">
            <input type="radio" name="content_type" value="software" class="sr-only" required>
            <div class="content-type-card border-2 border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 transition-all h-full">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ðŸ’»</span>
                    <h4 class="font-semibold text-gray-800">Software</h4>
                </div>
                <p class="text-sm text-gray-600">Codice, app, API, librerie</p>
                <p class="text-xs text-gray-500 mt-2">31+ linguaggi | Max 10MB</p>
            </div>
        </label>
        
        {# Hardware #}
        <label class="content-type-option cursor-pointer" data-type="hardware">
            <input type="radio" name="content_type" value="hardware" class="sr-only">
            <div class="content-type-card border-2 border-gray-200 rounded-lg p-4 hover:border-green-500 hover:bg-green-50 transition-all h-full">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ðŸ”§</span>
                    <h4 class="font-semibold text-gray-800">Hardware</h4>
                </div>
                <p class="text-sm text-gray-600">PCB, CAD, modelli 3D</p>
                <p class="text-xs text-gray-500 mt-2">25+ formati | Max 50MB</p>
            </div>
        </label>
        
        {# Design #}
        <label class="content-type-option cursor-pointer" data-type="design">
            <input type="radio" name="content_type" value="design" class="sr-only">
            <div class="content-type-card border-2 border-gray-200 rounded-lg p-4 hover:border-pink-500 hover:bg-pink-50 transition-all h-full">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ðŸŽ¨</span>
                    <h4 class="font-semibold text-gray-800">Design</h4>
                </div>
                <p class="text-sm text-gray-600">Loghi, UI/UX, grafiche</p>
                <p class="text-xs text-gray-500 mt-2">48+ formati | Max 100MB</p>
            </div>
        </label>
        
        {# Documentation #}
        <label class="content-type-option cursor-pointer" data-type="documentation">
            <input type="radio" name="content_type" value="documentation" class="sr-only">
            <div class="content-type-card border-2 border-gray-200 rounded-lg p-4 hover:border-yellow-500 hover:bg-yellow-50 transition-all h-full">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ðŸ“„</span>
                    <h4 class="font-semibold text-gray-800">Documentazione</h4>
                </div>
                <p class="text-sm text-gray-600">Guide, business plan, docs</p>
                <p class="text-xs text-gray-500 mt-2">20+ formati | Max 20MB</p>
            </div>
        </label>
        
        {# Media #}
        <label class="content-type-option cursor-pointer" data-type="media">
            <input type="radio" name="content_type" value="media" class="sr-only">
            <div class="content-type-card border-2 border-gray-200 rounded-lg p-4 hover:border-red-500 hover:bg-red-50 transition-all h-full">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ðŸŽ¬</span>
                    <h4 class="font-semibold text-gray-800">Media</h4>
                </div>
                <p class="text-sm text-gray-600">Video, audio, animazioni</p>
                <p class="text-xs text-gray-500 mt-2">25+ formati | Max 500MB</p>
            </div>
        </label>
        
        {# Mixed #}
        <label class="content-type-option cursor-pointer" data-type="mixed">
            <input type="radio" name="content_type" value="mixed" class="sr-only">
            <div class="content-type-card border-2 border-gray-200 rounded-lg p-4 hover:border-purple-500 hover:bg-purple-50 transition-all h-full">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ðŸ”€</span>
                    <h4 class="font-semibold text-gray-800">Misto</h4>
                </div>
                <p class="text-sm text-gray-600">Progetto completo multi-tipo</p>
                <p class="text-xs text-gray-500 mt-2">Tutti i formati | Variabile</p>
            </div>
        </label>
    </div>
    
    <div class="mt-4 text-center">
        <a href="/docs/content-types-guide" target="_blank" class="text-sm text-purple-600 hover:text-purple-800 underline">
            ðŸ“š Guida completa ai tipi supportati
        </a>
    </div>
</div>

{# Info dinamica basata su tipo selezionato #}
<div id="content-type-info" class="mt-4 p-4 rounded-lg border" style="display:none;">
    <h4 class="font-semibold mb-2" id="info-title"></h4>
    <p class="text-sm text-gray-600" id="info-description"></p>
    <div class="mt-2 text-xs text-gray-500">
        <strong>Formati accettati:</strong> <span id="info-formats"></span>
    </div>
</div>

<style>
.content-type-option input:checked + .content-type-card {
    border-width: 3px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.content-type-option input:checked + .content-type-card[class*="border-blue"] {
    border-color: #3b82f6;
    background-color: #eff6ff;
}

.content-type-option input:checked + .content-type-card[class*="border-green"] {
    border-color: #10b981;
    background-color: #ecfdf5;
}

.content-type-option input:checked + .content-type-card[class*="border-pink"] {
    border-color: #ec4899;
    background-color: #fdf2f8;
}

.content-type-option input:checked + .content-type-card[class*="border-yellow"] {
    border-color: #f59e0b;
    background-color: #fffbeb;
}

.content-type-option input:checked + .content-type-card[class*="border-red"] {
    border-color: #ef4444;
    background-color: #fef2f2;
}

.content-type-option input:checked + .content-type-card[class*="border-purple"] {
    border-color: #a855f7;
    background-color: #faf5ff;
}
</style>

<script>
// Content type information
const contentTypeInfo = {
    software: {
        title: "ðŸ’» Software/Codice",
        description: "Invia codice sorgente, librerie, API, applicazioni complete",
        formats: ".py, .js, .ts, .cpp, .java, .go, .rs, .html, .css, .json..."
    },
    hardware: {
        title: "ðŸ”§ Hardware/Elettronica",
        description: "Invia progetti PCB, modelli 3D, schematici, file Gerber",
        formats: ".stl, .step, .kicad_pcb, .brd, .sch, .dwg, .gbr..."
    },
    design: {
        title: "ðŸŽ¨ Design Grafico",
        description: "Invia loghi, mockup UI/UX, illustrazioni, brand assets",
        formats: ".psd, .ai, .fig, .sketch, .xd, .svg, .png, .jpg..."
    },
    documentation: {
        title: "ðŸ“„ Documentazione",
        description: "Invia guide utente, business plan, presentazioni, docs tecniche",
        formats: ".pdf, .docx, .pptx, .md, .xlsx, .odt..."
    },
    media: {
        title: "ðŸŽ¬ Media",
        description: "Invia video promozionali, audio, animazioni, fotografie",
        formats: ".mp4, .mov, .mp3, .wav, .gif, .webm, .jpg..."
    },
    mixed: {
        title: "ðŸ”€ Progetto Misto",
        description: "Combina piÃ¹ tipi di contenuto in un progetto completo",
        formats: "Tutti i formati supportati"
    }
};

// Handle content type selection
document.addEventListener('DOMContentLoaded', function() {
    const options = document.querySelectorAll('.content-type-option');
    const infoBox = document.getElementById('content-type-info');
    const infoTitle = document.getElementById('info-title');
    const infoDescription = document.getElementById('info-description');
    const infoFormats = document.getElementById('info-formats');
    
    options.forEach(option => {
        option.addEventListener('click', function() {
            const type = this.dataset.type;
            const radio = this.querySelector('input[type="radio"]');
            radio.checked = true;
            
            // Update info box
            const info = contentTypeInfo[type];
            if (info) {
                infoTitle.textContent = info.title;
                infoDescription.textContent = info.description;
                infoFormats.textContent = info.formats;
                infoBox.style.display = 'block';
                
                // Update border color based on type
                infoBox.className = 'mt-4 p-4 rounded-lg border-2';
                if (type === 'software') infoBox.classList.add('border-blue-300', 'bg-blue-50');
                if (type === 'hardware') infoBox.classList.add('border-green-300', 'bg-green-50');
                if (type === 'design') infoBox.classList.add('border-pink-300', 'bg-pink-50');
                if (type === 'documentation') infoBox.classList.add('border-yellow-300', 'bg-yellow-50');
                if (type === 'media') infoBox.classList.add('border-red-300', 'bg-red-50');
                if (type === 'mixed') infoBox.classList.add('border-purple-300', 'bg-purple-50');
            }
            
            // Trigger file input update
            updateFileInputs(type);
        });
    });
});

function updateFileInputs(contentType) {
    // Update file accept attributes based on content type
    // This will be called when type changes
    console.log('Content type changed to:', contentType);
    
    // Dispatch custom event for other scripts to handle
    document.dispatchEvent(new CustomEvent('contentTypeChanged', { 
        detail: { contentType: contentType } 
    }));
}
</script>
