{# /app/templates/partials/_task_card_tailwind.html #}
<div class="group relative bg-gray-900 border border-gray-800 rounded-xl overflow-hidden hover:border-gray-600 transition-all duration-300">
    
    <div class="p-6 space-y-4">
        
        {# Header: Status & Equity #}
        <div class="flex justify-between items-start">
            <span class="px-2 py-1 rounded text-xs font-bold uppercase tracking-wider
                {% if task.status == 'approved' %} bg-green-900/30 text-green-400 border border-green-900
                {% elif task.status == 'open' %} bg-blue-900/30 text-blue-400 border border-blue-900
                {% elif task.status == 'in_progress' %} bg-purple-900/30 text-purple-400 border border-purple-900
                {% elif task.status == 'submitted' %} bg-yellow-900/30 text-yellow-400 border border-yellow-900
                {% else %} bg-gray-800 text-gray-400 border border-gray-700 {% endif %}">
                {{ ALLOWED_TASK_STATUS.get(task.status, task.status) }}
            </span>

            <div class="flex items-center gap-1">
                <span class="text-lg font-bold text-white">{{ task.equity_reward | int }}</span>
                <span class="text-[10px] text-gray-500 uppercase font-bold">Shares</span>
            </div>
        </div>

        {# Title #}
        <h3 class="text-xl font-bold text-white leading-tight group-hover:text-accent transition-colors">
            <a href="{{ url_for('tasks.task_detail', task_id=task.id) }}" class="block">
                {{ task.title }}
            </a>
        </h3>

        {# Meta Info #}
        <div class="flex flex-wrap items-center gap-3 text-xs text-gray-500 font-mono">
            <span class="flex items-center gap-1">
                {% if task.task_type == 'proposal' %}
                    <span class="material-icons text-xs text-purple-400">emoji_objects</span>
                {% else %}
                    <span class="material-icons text-xs text-blue-400">code</span>
                {% endif %}
                {{ ALLOWED_TASK_TYPES.get(task.task_type, 'Task') }}
            </span>
            <span>•</span>
            <span>{{ ALLOWED_TASK_DIFFICULTIES.get(task.difficulty, task.difficulty) }}</span>
            
            {% if task.creator %}
            <span>•</span>
            <span>by {{ task.creator.username }}</span>
            {% endif %}
        </div>

        {# Actions #}
        <div class="pt-4 mt-4 border-t border-gray-800 flex justify-between items-center">
            
            {# Badges #}
            <div class="flex gap-2">
                {% if task.status == 'suggested' %}
                    <span class="text-xs text-purple-400 flex items-center gap-1">
                        <span class="material-icons text-xs">auto_awesome</span> AI
                    </span>
                {% endif %}
                {% if task.is_private %}
                    <span class="text-xs text-gray-500 flex items-center gap-1">
                        <span class="material-icons text-xs">lock</span>
                    </span>
                {% endif %}
            </div>

            {# Action Buttons #}
            <div>
                {% set is_creator = current_user.is_authenticated and project.creator_id == current_user.id %}
                {% set is_collaborator = current_user.is_authenticated and current_user in project.collaborators %}
                {% set can_manage_suggested = is_creator or is_collaborator %}
                
                {% if task.status == 'suggested' and can_manage_suggested %}
                    <div class="flex gap-2">
                        <button 
                            class="btn-edit-task px-3 py-1 bg-gray-800 hover:bg-gray-700 text-white text-xs font-bold rounded transition-colors" 
                            data-task-id="{{ task.id }}"
                            onclick="editTaskModal({{ task.id }})">
                            Modifica
                        </button>
                        <button 
                            class="btn-activate-task px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors" 
                            data-task-id="{{ task.id }}"
                            onclick="activateTask({{ task.id }})">
                            Attiva
                        </button>
                    </div>
                {% else %}
                    <a href="{{ url_for('tasks.task_detail', task_id=task.id) }}" class="text-gray-400 hover:text-white text-xs font-bold flex items-center gap-1 transition-colors">
                        DETTAGLI <span class="material-icons text-xs">arrow_forward</span>
                    </a>
                {% endif %}
            </div>
        </div>

    </div>
</div>
